<div class="dashboard-container">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">{{ 'dashboard.title' | translate }}</h1>
      <p class="page-subtitle">{{ 'dashboard.welcome' | translate }}, {{ adminName }}!</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-primary" (click)="refreshData()">
        <span class="icon">ğŸ”„</span>
        {{ 'common.refresh' | translate }}
      </button>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stats-card primary" *ngIf="stats">
      <div class="stats-icon primary">
        <span>ğŸ“§</span>
      </div>
      <div class="stats-content">
        <div class="stats-number">{{ stats.total_leads || 0 }}</div>
        <div class="stats-label">{{ 'dashboard.totalLeads' | translate }}</div>
        <div class="stats-change positive" *ngIf="stats.leads_change">
          <span>â†‘ {{ stats.leads_change }}%</span>
          <span class="change-text">{{ 'dashboard.thisMonth' | translate }}</span>
        </div>
      </div>
    </div>

    <div class="stats-card success" *ngIf="stats">
      <div class="stats-icon success">
        <span>âœ…</span>
      </div>
      <div class="stats-content">
        <div class="stats-number">{{ stats.new_leads || 0 }}</div>
        <div class="stats-label">{{ 'dashboard.newLeads' | translate }}</div>
        <div class="stats-badge">{{ 'dashboard.unread' | translate }}</div>
      </div>
    </div>

    <div class="stats-card warning" *ngIf="stats">
      <div class="stats-icon warning">
        <span>ğŸ› ï¸</span>
      </div>
      <div class="stats-content">
        <div class="stats-number">{{ stats.total_services || 0 }}</div>
        <div class="stats-label">{{ 'dashboard.activeServices' | translate }}</div>
      </div>
    </div>

    <div class="stats-card info" *ngIf="stats">
      <div class="stats-icon info">
        <span>ğŸ’¬</span>
      </div>
      <div class="stats-content">
        <div class="stats-number">{{ stats.total_testimonials || 0 }}</div>
        <div class="stats-label">{{ 'dashboard.testimonials' | translate }}</div>
      </div>
    </div>
  </div>

  <!-- Charts Row -->
  <div class="charts-row">
    <!-- Recent Activity -->
    <div class="card chart-card">
      <div class="card-header">
        <h3>{{ 'dashboard.recentActivity' | translate }}</h3>
      </div>
      <div class="card-body">
        <div class="activity-list" *ngIf="recentActivity && recentActivity.length > 0">
          <div class="activity-item" *ngFor="let activity of recentActivity">
            <div class="activity-icon" [ngClass]="activity.type">
              <span>{{ getActivityIcon(activity.type) }}</span>
            </div>
            <div class="activity-content">
              <div class="activity-title">{{ activity.title }}</div>
              <div class="activity-time">{{ activity.time }}</div>
            </div>
          </div>
        </div>
        <div class="empty-state" *ngIf="!recentActivity || recentActivity.length === 0">
          <span class="empty-icon">ğŸ“Š</span>
          <p>{{ 'dashboard.noActivity' | translate }}</p>
        </div>
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="card chart-card">
      <div class="card-header">
        <h3>{{ 'dashboard.quickStats' | translate }}</h3>
      </div>
      <div class="card-body">
        <div class="quick-stats-list">
          <div class="quick-stat-item">
            <div class="stat-label">{{ 'dashboard.totalPricingPlans' | translate }}</div>
            <div class="stat-value">{{ stats?.total_pricing || 0 }}</div>
          </div>
          <div class="quick-stat-item">
            <div class="stat-label">{{ 'dashboard.totalFeatures' | translate }}</div>
            <div class="stat-value">{{ stats?.total_features || 0 }}</div>
          </div>
          <div class="quick-stat-item">
            <div class="stat-label">{{ 'dashboard.totalFAQ' | translate }}</div>
            <div class="stat-value">{{ stats?.total_faq || 0 }}</div>
          </div>
          <div class="quick-stat-item">
            <div class="stat-label">{{ 'dashboard.totalMedia' | translate }}</div>
            <div class="stat-value">{{ stats?.total_media || 0 }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Leads Table -->
  <div class="card">
    <div class="card-header">
      <h3>{{ 'dashboard.recentLeads' | translate }}</h3>
      <a [routerLink]="['/leads']" class="view-all-link">
        {{ 'dashboard.viewAll' | translate }} â†’
      </a>
    </div>
    <div class="card-body">
      <div class="table-responsive" *ngIf="recentLeads && recentLeads.length > 0">
        <table class="table">
          <thead>
            <tr>
              <th>{{ 'leads.name' | translate }}</th>
              <th>{{ 'leads.email' | translate }}</th>
              <th>{{ 'leads.company' | translate }}</th>
              <th>{{ 'leads.plan' | translate }}</th>
              <th>{{ 'leads.status' | translate }}</th>
              <th>{{ 'leads.date' | translate }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let lead of recentLeads">
              <td>
                <div class="user-info">
                  <span class="user-avatar">{{ lead.name.charAt(0) }}</span>
                  <span class="user-name">{{ lead.name }}</span>
                </div>
              </td>
              <td>{{ lead.email }}</td>
              <td>{{ lead.company || '-' }}</td>
              <td>
                <span class="badge badge-primary">{{ lead.plan || 'N/A' }}</span>
              </td>
              <td>
                <span class="badge" [ngClass]="'badge-' + getStatusClass(lead.status)">
                  {{ 'leads.' + lead.status | translate }}
                </span>
              </td>
              <td>{{ formatDate(lead.created_at) }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="empty-state" *ngIf="!recentLeads || recentLeads.length === 0">
        <span class="empty-icon">ğŸ“­</span>
        <p>{{ 'dashboard.noLeads' | translate }}</p>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-overlay" *ngIf="loading">
    <div class="spinner"></div>
    <p>{{ 'common.loading' | translate }}</p>
  </div>
</div>
